<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>搜索结果 - Diet Hub</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/results.css">
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <h2>🍎 Diet & Health Hub</h2>
            </div>
            <div class="nav-menu">
                <a href="../index.html" class="nav-link">首页</a>
                <a href="profile.html" class="nav-link">健康档案</a>
                <a href="dashboard.html" class="nav-link">健康仪表盘</a>
                <a href="recommendations.html" class="nav-link">饮食推荐</a>
            </div>
        </div>
    </nav>

    <!-- 主要内容 -->
    <main class="main-content">
        <div class="container">
            <!-- 搜索头部 -->
            <div class="search-header">
                <button class="btn btn-secondary back-btn" onclick="history.back()">
                    ← 返回
                </button>
                <div class="search-box-compact">
                    <input type="text" id="searchInput" placeholder="搜索食谱...">
                    <button id="searchBtn" class="btn btn-primary">🔍</button>
                </div>
            </div>

            <!-- 搜索结果信息 -->
            <div class="results-info">
                <h1>
                    <span id="searchKeyword">搜索结果</span>
                </h1>
                <p id="resultsCount">找到 0 个相关食谱</p>
            </div>

            <!-- 排序选项 -->
            <div class="sort-bar">
                <span class="sort-label">排序方式:</span>
                <select id="sortSelect">
                    <option value="default">默认</option>
                    <option value="calories-asc">卡路里 (低到高)</option>
                    <option value="calories-desc">卡路里 (高到低)</option>
                    <option value="protein-desc">蛋白质 (高到低)</option>
                    <option value="time-asc">准备时间 (短到长)</option>
                </select>
            </div>

            <!-- 加载状态 -->
            <div id="loadingSpinner" class="loading-spinner" style="display: none;">
                <div class="spinner"></div>
                <p>搜索中...</p>
            </div>

            <!-- 搜索结果列表 -->
            <div id="resultsGrid" class="results-grid">
                <!-- 结果卡片将通过JavaScript动态生成 -->
            </div>

            <!-- 无结果提示 -->
            <div id="noResults" class="no-results" style="display: none;">
                <div class="no-results-icon">😕</div>
                <h2>未找到匹配的食谱</h2>
                <p>请尝试:</p>
                <ul class="suggestions-list">
                    <li>使用不同的关键词</li>
                    <li>检查拼写是否正确</li>
                    <li>使用更通用的搜索词</li>
                    <li>浏览所有食谱</li>
                </ul>
                <div class="no-results-actions">
                    <button class="btn btn-primary" onclick="location.href='recommendations.html'">
                        浏览所有食谱
                    </button>
                    <button class="btn btn-secondary" onclick="clearSearch()">
                        清空搜索
                    </button>
                </div>
            </div>

            <!-- 相关推荐 -->
            <div id="relatedSection" class="related-section" style="display: none;">
                <h2>🌟 您可能还喜欢</h2>
                <div id="relatedGrid" class="related-grid">
                    <!-- 相关推荐将通过JavaScript动态生成 -->
                </div>
            </div>
        </div>
    </main>

    <!-- 食谱详情模态框 -->
    <div id="recipeModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="modal-header">
                <h2 id="modalRecipeName">食谱详情</h2>
            </div>
            <div class="modal-body">
                <div class="recipe-quick-info">
                    <div class="quick-info-item">
                        <span class="icon">🔥</span>
                        <span class="value" id="modalCalories">-</span>
                        <span class="label">千卡</span>
                    </div>
                    <div class="quick-info-item">
                        <span class="icon">⏱️</span>
                        <span class="value" id="modalPrepTime">-</span>
                        <span class="label">分钟</span>
                    </div>
                    <div class="quick-info-item">
                        <span class="icon">📊</span>
                        <span class="value" id="modalDifficulty">-</span>
                        <span class="label">难度</span>
                    </div>
                </div>

                <div class="modal-section">
                    <h3>📝 简介</h3>
                    <p id="modalDescription" class="description-text">-</p>
                </div>

                <div class="modal-section">
                    <h3>🥗 所需食材</h3>
                    <div id="modalIngredients" class="ingredients-container"></div>
                </div>

                <div class="modal-section">
                    <h3>👨‍🍳 制作步骤</h3>
                    <div id="modalInstructions" class="instructions-container"></div>
                </div>

                <div class="modal-section">
                    <h3>📊 营养信息</h3>
                    <div class="nutrition-summary">
                        <div class="nutrition-card">
                            <div class="nutrition-label">蛋白质</div>
                            <div class="nutrition-value" id="modalProtein">-</div>
                        </div>
                        <div class="nutrition-card">
                            <div class="nutrition-label">碳水化合物</div>
                            <div class="nutrition-value" id="modalCarbs">-</div>
                        </div>
                        <div class="nutrition-card">
                            <div class="nutrition-label">脂肪</div>
                            <div class="nutrition-value" id="modalFat">-</div>
                        </div>
                    </div>
                </div>

                <div class="modal-tags">
                    <span class="tags-label">标签:</span>
                    <div id="modalTags" class="tags-container"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">关闭</button>
                <button class="btn btn-primary" onclick="addToMealPlan()">添加到计划</button>
            </div>
        </div>
    </div>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Diet & Health Hub. 健康生活，从科学饮食开始。</p>
        </div>
    </footer>

    <script src="../js/api.js"></script>
    <script src="../js/results.js"></script>
</body>
</html>
