<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ªäººå¥åº·æ¡£æ¡ˆ - Diet Hub</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/profile.css">
    <link rel="stylesheet" href="../css/global-enhancements.css">
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <h2>ğŸ Diet & Health Hub</h2>
            </div>
            <div class="nav-menu">
                <a href="../index.html" class="nav-link">é¦–é¡µ</a>
                <a href="profile.html" class="nav-link active">å¥åº·æ¡£æ¡ˆ</a>
                <a href="dashboard.html" class="nav-link">å¥åº·ä»ªè¡¨ç›˜</a>
                <a href="recommendations.html" class="nav-link">é¥®é£Ÿæ¨è</a>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹ -->
    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <h1>ğŸ“‹ ä¸ªäººå¥åº·æ¡£æ¡ˆ</h1>
                <p>å®Œå–„æ‚¨çš„å¥åº·ä¿¡æ¯ï¼Œè·å–æ›´ç²¾å‡†çš„å¥åº·å»ºè®®</p>
            </div>

            <!-- æç¤ºä¿¡æ¯ -->
            <div id="message" class="message"></div>

            <!-- æ¡£æ¡ˆè¡¨å• -->
            <div class="profile-card shadow-soft animate-fadeIn">
                <form id="profileForm" class="enhanced-form">
                    <!-- åŸºæœ¬ä¿¡æ¯ -->
                    <div class="form-section">
                        <h2 class="section-title">åŸºæœ¬ä¿¡æ¯</h2>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="userId">ç”¨æˆ·ID *</label>
                                <input type="text" id="userId" name="userId" required 
                                       placeholder="è¯·è¾“å…¥æ‚¨çš„ç”¨æˆ·ID">
                                <small>ç”¨äºè¯†åˆ«æ‚¨çš„ä¸ªäººæ¡£æ¡ˆ</small>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="age">å¹´é¾„ *</label>
                                <input type="number" id="age" name="age" required 
                                       min="1" max="120" placeholder="è¯·è¾“å…¥å¹´é¾„">
                            </div>
                            
                            <div class="form-group">
                                <label for="gender">æ€§åˆ« *</label>
                                <select id="gender" name="gender" required>
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="Male">ç”·</option>
                                    <option value="Female">å¥³</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="height">èº«é«˜ (cm) *</label>
                                <input type="number" id="height" name="height" required 
                                       min="50" max="250" step="0.1" placeholder="ä¾‹: 170">
                            </div>
                            
                            <div class="form-group">
                                <label for="weight">ä½“é‡ (kg) *</label>
                                <input type="number" id="weight" name="weight" required 
                                       min="20" max="300" step="0.1" placeholder="ä¾‹: 65">
                            </div>
                        </div>
                    </div>

                    <!-- å¥åº·ç›®æ ‡ -->
                    <div class="form-section">
                        <h2 class="section-title">å¥åº·ç›®æ ‡</h2>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="healthGoal">å¥åº·ç›®æ ‡</label>
                                <select id="healthGoal" name="healthGoal">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="Weight Loss">å‡é‡</option>
                                    <option value="Weight Gain">å¢é‡</option>
                                    <option value="Maintain Weight">ç»´æŒä½“é‡</option>
                                    <option value="Muscle Gain">å¢è‚Œ</option>
                                    <option value="General Health">ä¸€èˆ¬å¥åº·</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="activityLevel">æ´»åŠ¨æ°´å¹³</label>
                                <select id="activityLevel" name="activityLevel">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="Sedentary">ä¹…å (å¾ˆå°‘è¿åŠ¨)</option>
                                    <option value="Light">è½»åº¦æ´»åŠ¨ (æ¯å‘¨1-3æ¬¡)</option>
                                    <option value="Moderate">ä¸­åº¦æ´»åŠ¨ (æ¯å‘¨3-5æ¬¡)</option>
                                    <option value="Active">é«˜åº¦æ´»åŠ¨ (æ¯å‘¨6-7æ¬¡)</option>
                                    <option value="Very Active">æåº¦æ´»åŠ¨ (æ¯å¤©2æ¬¡)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- é¥®é£Ÿé™åˆ¶ -->
                    <div class="form-section">
                        <h2 class="section-title">é¥®é£Ÿåå¥½ä¸é™åˆ¶</h2>
                        
                        <div class="form-group">
                            <label for="dietaryRestrictions">é¥®é£Ÿé™åˆ¶</label>
                            <textarea id="dietaryRestrictions" name="dietaryRestrictions" 
                                      rows="3" placeholder="ä¾‹: ç´ é£Ÿã€ä½ç¢³æ°´ã€ç”Ÿé…®é¥®é£Ÿç­‰"></textarea>
                            <small>å¦‚æœ‰ç‰¹æ®Šé¥®é£Ÿè¦æ±‚ï¼Œè¯·åœ¨æ­¤è¯´æ˜</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="allergies">è¿‡æ•ä¿¡æ¯</label>
                            <textarea id="allergies" name="allergies" 
                                      rows="3" placeholder="ä¾‹: æµ·é²œã€åšæœã€ä¹³åˆ¶å“ç­‰"></textarea>
                            <small>è¯·åˆ—å‡ºæ‰€æœ‰å·²çŸ¥çš„é£Ÿç‰©è¿‡æ•</small>
                        </div>
                    </div>

                    <!-- æŒ‰é’®ç»„ -->
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="loadBtn">
                            åŠ è½½æ¡£æ¡ˆ
                        </button>
                        <button type="submit" class="btn btn-primary" id="saveBtn">
                            ä¿å­˜æ¡£æ¡ˆ
                        </button>
                        <button type="button" class="btn btn-success" id="viewDashboardBtn">
                            æŸ¥çœ‹ä»ªè¡¨ç›˜
                        </button>
                    </div>
                </form>
            </div>

            <!-- å½“å‰BMIæ˜¾ç¤º -->
            <div id="bmiPreview" class="bmi-preview shadow-neumorphic animate-scaleIn" style="display: none;">
                <h3>å¿«é€Ÿé¢„è§ˆ</h3>
                <div class="bmi-value">
                    <span class="label">å½“å‰BMI:</span>
                    <span class="value" id="currentBMI">-</span>
                </div>
                <div class="bmi-status" id="bmiStatus"></div>
            </div>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Diet & Health Hub. å¥åº·ç”Ÿæ´»ï¼Œä»ç§‘å­¦é¥®é£Ÿå¼€å§‹ã€‚</p>
        </div>
    </footer>

    <script src="../js/api.js"></script>
    <script src="../js/formEnhancer.js" type="module"></script>
    <script src="../js/profile.js"></script>
    
    <script>
        // å¢å¼ºè¡¨å•äº¤äº’ä½“éªŒ
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥è¡¨å•å¢å¼ºæ¨¡å—æ˜¯å¦å¯ç”¨
            if (window.enhanceFormInputs) {
                // å¢å¼ºè¡¨å•è¾“å…¥å…ƒç´ äº¤äº’
                window.enhanceFormInputs('#profileForm');
                
                // å¢å¼ºæäº¤æŒ‰é’®
                window.enhanceSubmitButton('#saveBtn', async function() {
                    // è¿™é‡Œä¸éœ€è¦å…·ä½“å®ç°ï¼Œå®é™…æäº¤é€»è¾‘å·²ç»åœ¨profile.jsä¸­
                    // è¿™é‡Œåªæ˜¯æ¼”ç¤ºæŒ‰é’®äº¤äº’æ•ˆæœ
                    return new Promise((resolve) => {
                        setTimeout(resolve, 1500);
                    });
                });
            } else {
                // å¤‡ç”¨æ–¹æ¡ˆï¼šåŸºæœ¬æ ·å¼å¢å¼º
                enhanceFormFallback();
            }
        });
        
        // å¤‡ç”¨å¢å¼ºæ–¹æ¡ˆ
        function enhanceFormFallback() {
            const inputs = document.querySelectorAll('#profileForm input, #profileForm select, #profileForm textarea');
            
            inputs.forEach(input => {
                input.addEventListener('focus', function() {
                    this.classList.add('input-focus');
                    const label = document.querySelector(`label[for="${this.id}"]`);
                    if (label) {
                        label.classList.add('label-focus');
                    }
                });
                
                input.addEventListener('blur', function() {
                    this.classList.remove('input-focus');
                    const label = document.querySelector(`label[for="${this.id}"]`);
                    if (label) {
                        label.classList.remove('label-focus');
                    }
                });
            });
            
            // è¡¨å•æäº¤æŒ‰é’®å¢å¼º
            const saveBtn = document.getElementById('saveBtn');
            if (saveBtn) {
                const originalText = saveBtn.textContent;
                
                saveBtn.addEventListener('click', function(e) {
                    if (saveBtn.classList.contains('loading')) return;
                    
                    // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                    saveBtn.classList.add('loading');
                    saveBtn.innerHTML = '<span class="spinner"></span>';
                    
                    // æ¨¡æ‹Ÿæäº¤å®Œæˆ
                    setTimeout(() => {
                        saveBtn.classList.remove('loading');
                        saveBtn.classList.add('success');
                        saveBtn.innerHTML = 'âœ“ å·²ä¿å­˜';
                        
                        setTimeout(() => {
                            saveBtn.classList.remove('success');
                            saveBtn.textContent = originalText;
                        }, 2000);
                    }, 1500);
                });
            }
        }
    </script>
</body>
</html>
